# useInterval

响应式定时器，提供可控制的定时执行功能。

## 基本用法

### useInterval

创建一个响应式的定时器：

```tsx
import { useInterval } from '@reactuse/core'
import { useState } from 'react'

function Demo() {
  const [count, setCount] = useState(0)
  
  // 每秒自动增加计数
  useInterval(() => {
    setCount(c => c + 1)
  }, 1000)

  return (
    <div>
      <p>计数: {count}</p>
    </div>
  )
}
```

### useIntervalFn

获得更多控制权的定时器：

```tsx
import { useIntervalFn } from '@reactuse/core'
import { useState } from 'react'

function Demo() {
  const [count, setCount] = useState(0)
  
  const { isActive, pause, resume, restart } = useIntervalFn(() => {
    setCount(c => c + 1)
  }, 1000)

  return (
    <div>
      <p>计数: {count}</p>
      <p>状态: {isActive ? '运行中' : '已暂停'}</p>
      <button onClick={pause}>暂停</button>
      <button onClick={resume}>继续</button>
      <button onClick={restart}>重启</button>
    </div>
  )
}
```

## 高级用法

### 动态间隔时间

```tsx
import { useInterval } from '@reactuse/core'
import { useState } from 'react'

function Demo() {
  const [count, setCount] = useState(0)
  const [interval, setInterval] = useState(1000)
  
  useInterval(() => {
    setCount(c => c + 1)
  }, interval)

  return (
    <div>
      <p>计数: {count}</p>
      <p>间隔: {interval}ms</p>
      <button onClick={() => setInterval(500)}>快速 (500ms)</button>
      <button onClick={() => setInterval(1000)}>正常 (1000ms)</button>
      <button onClick={() => setInterval(2000)}>慢速 (2000ms)</button>
    </div>
  )
}
```

### 条件性定时器

```tsx
import { useInterval } from '@reactuse/core'
import { useState } from 'react'

function Demo() {
  const [count, setCount] = useState(0)
  const [enabled, setEnabled] = useState(true)
  
  // 只有在 enabled 为 true 时才执行
  useInterval(() => {
    setCount(c => c + 1)
  }, enabled ? 1000 : null)

  return (
    <div>
      <p>计数: {count}</p>
      <button onClick={() => setEnabled(!enabled)}>
        {enabled ? '停止' : '开始'}
      </button>
    </div>
  )
}
```

### 配置选项

```tsx
import { useIntervalFn } from '@reactuse/core'
import { useState } from 'react'

function Demo() {
  const [count, setCount] = useState(0)
  
  const { isActive, pause, resume } = useIntervalFn(
    () => setCount(c => c + 1),
    1000,
    {
      immediate: true,        // 立即执行第一次
      immediateCallback: true // 立即执行回调
    }
  )

  return (
    <div>
      <p>计数: {count}</p>
      <p>状态: {isActive ? '运行中' : '已暂停'}</p>
      <button onClick={pause}>暂停</button>
      <button onClick={resume}>继续</button>
    </div>
  )
}
```

### 倒计时器

```tsx
import { useIntervalFn } from '@reactuse/core'
import { useState } from 'react'

function CountdownDemo() {
  const [timeLeft, setTimeLeft] = useState(60)
  
  const { isActive, pause, resume, restart } = useIntervalFn(() => {
    setTimeLeft(time => {
      if (time <= 1) {
        pause() // 倒计时结束时自动暂停
        return 0
      }
      return time - 1
    })
  }, 1000)

  const handleRestart = () => {
    setTimeLeft(60)
    restart()
  }

  return (
    <div>
      <h2>倒计时: {timeLeft}秒</h2>
      <button onClick={pause} disabled={!isActive}>暂停</button>
      <button onClick={resume} disabled={isActive}>继续</button>
      <button onClick={handleRestart}>重新开始</button>
    </div>
  )
}
```

## API

### useInterval

```typescript
function useInterval(
  callback: () => void,
  interval: number | null,
  options?: IntervalOptions
): void
```

**参数：**

- `callback`: 要定时执行的函数
- `interval`: 间隔时间（毫秒），传入 `null` 可暂停定时器
- `options`: 配置选项

### useIntervalFn

```typescript
function useIntervalFn(
  callback: () => void,
  interval: number,
  options?: IntervalOptions
): {
  isActive: boolean
  pause: () => void
  resume: () => void
  restart: () => void
}
```

**参数：**

- `callback`: 要定时执行的函数
- `interval`: 间隔时间（毫秒）
- `options`: 配置选项

**返回值：**

- `isActive`: 定时器是否处于活动状态
- `pause`: 暂停定时器
- `resume`: 恢复定时器
- `restart`: 重启定时器

### IntervalOptions

```typescript
interface IntervalOptions {
  immediate?: boolean        // 是否立即开始，默认 true
  immediateCallback?: boolean // 是否立即执行回调，默认 false
}
```

## 使用场景

- **实时数据更新**：定期获取最新数据
- **倒计时器**：实现各种倒计时功能
- **动画效果**：创建基于时间的动画
- **状态轮询**：定期检查状态变化
- **自动保存**：定期保存用户数据

## 注意事项

1. 组件卸载时会自动清理定时器，避免内存泄漏
2. 当 `interval` 为 `null` 时，定时器会被暂停
3. 支持 SSR，在服务端不会启动定时器
4. 回调函数会被自动记忆化，避免不必要的定时器重启
5. 使用 `useIntervalFn` 可以获得更多的控制权

## 相关 Hooks

- [`useTimeout`](/functions/useTimeout) - 一次性定时器
- [`useNow`](/functions/useNow) - 响应式当前时间
- [`useDebounce`](/functions/useDebounce) - 防抖函数
- [`useThrottle`](/functions/useThrottle) - 节流函数