# useNow

å“åº”å¼å½“å‰æ—¶é—´ï¼Œæä¾›å®æ—¶æ›´æ–°çš„æ—¶é—´å€¼ã€‚

## åŸºæœ¬ç”¨æ³•

### useNow

è·å–å®æ—¶æ›´æ–°çš„å½“å‰æ—¶é—´ï¼š

```tsx
import { useNow } from '@reactuse/core'

function Demo() {
  const now = useNow()

  return (
    <div>
      <p>å½“å‰æ—¶é—´: {now.toLocaleString()}</p>
    </div>
  )
}
```

### useTimestamp

è·å–å®æ—¶æ›´æ–°çš„æ—¶é—´æˆ³ï¼š

```tsx
import { useTimestamp } from '@reactuse/core'

function Demo() {
  const timestamp = useTimestamp()

  return (
    <div>
      <p>æ—¶é—´æˆ³: {timestamp}</p>
      <p>æ—¥æœŸ: {new Date(timestamp).toLocaleString()}</p>
    </div>
  )
}
```

### usePerformanceNow

è·å–é«˜ç²¾åº¦æ—¶é—´æˆ³ï¼š

```tsx
import { usePerformanceNow } from '@reactuse/core'

function Demo() {
  const performanceNow = usePerformanceNow()

  return (
    <div>
      <p>é«˜ç²¾åº¦æ—¶é—´æˆ³: {performanceNow.toFixed(3)}ms</p>
    </div>
  )
}
```

## é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰æ›´æ–°é—´éš”

```tsx
import { useNow } from '@reactuse/core'

function Demo() {
  // æ¯100æ¯«ç§’æ›´æ–°ä¸€æ¬¡
  const now = useNow({ interval: 100 })

  return (
    <div>
      <p>é«˜é¢‘æ›´æ–°æ—¶é—´: {now.toLocaleTimeString()}</p>
      <p>æ¯«ç§’: {now.getMilliseconds()}</p>
    </div>
  )
}
```

### å¯æ§åˆ¶çš„æ—¶é—´æ›´æ–°

```tsx
import { useNow } from '@reactuse/core'
import { useState } from 'react'

function Demo() {
  const [enabled, setEnabled] = useState(true)
  const now = useNow({ interval: enabled ? 1000 : false })

  return (
    <div>
      <p>å½“å‰æ—¶é—´: {now.toLocaleString()}</p>
      <button onClick={() => setEnabled(!enabled)}>
        {enabled ? 'æš‚åœ' : 'å¼€å§‹'}æ›´æ–°
      </button>
    </div>
  )
}
```

### æ•°å­—æ—¶é’Ÿ

```tsx
import { useNow } from '@reactuse/core'

function DigitalClock() {
  const now = useNow({ interval: 1000 })
  
  const formatTime = (date: Date) => {
    return date.toLocaleTimeString('zh-CN', {
      hour12: false,
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    })
  }

  const formatDate = (date: Date) => {
    return date.toLocaleDateString('zh-CN', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      weekday: 'long'
    })
  }

  return (
    <div style={{ textAlign: 'center', fontFamily: 'monospace' }}>
      <h1 style={{ fontSize: '3rem', margin: '0' }}>
        {formatTime(now)}
      </h1>
      <p style={{ fontSize: '1.2rem', color: '#666' }}>
        {formatDate(now)}
      </p>
    </div>
  )
}
```

### å€’è®¡æ—¶åˆ°ç‰¹å®šæ—¶é—´

```tsx
import { useNow } from '@reactuse/core'
import { useMemo } from 'react'

function CountdownToNewYear() {
  const now = useNow({ interval: 1000 })
  
  const timeLeft = useMemo(() => {
    const newYear = new Date(now.getFullYear() + 1, 0, 1)
    const diff = newYear.getTime() - now.getTime()
    
    if (diff <= 0) return null
    
    const days = Math.floor(diff / (1000 * 60 * 60 * 24))
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))
    const seconds = Math.floor((diff % (1000 * 60)) / 1000)
    
    return { days, hours, minutes, seconds }
  }, [now])

  if (!timeLeft) {
    return <h1>ğŸ‰ æ–°å¹´å¿«ä¹ï¼</h1>
  }

  return (
    <div style={{ textAlign: 'center' }}>
      <h2>è·ç¦»æ–°å¹´è¿˜æœ‰ï¼š</h2>
      <div style={{ fontSize: '2rem', fontFamily: 'monospace' }}>
        {timeLeft.days}å¤© {timeLeft.hours}æ—¶ {timeLeft.minutes}åˆ† {timeLeft.seconds}ç§’
      </div>
    </div>
  )
}
```

### æ€§èƒ½ç›‘æ§

```tsx
import { usePerformanceNow } from '@reactuse/core'
import { useState, useCallback } from 'react'

function PerformanceMonitor() {
  const performanceNow = usePerformanceNow({ interval: 100 })
  const [startTime, setStartTime] = useState<number | null>(null)
  const [duration, setDuration] = useState<number | null>(null)
  
  const startMeasure = useCallback(() => {
    setStartTime(performanceNow)
    setDuration(null)
  }, [performanceNow])
  
  const stopMeasure = useCallback(() => {
    if (startTime !== null) {
      setDuration(performanceNow - startTime)
    }
  }, [performanceNow, startTime])

  return (
    <div>
      <p>å½“å‰æ€§èƒ½æ—¶é—´: {performanceNow.toFixed(3)}ms</p>
      {startTime && (
        <p>æµ‹é‡å¼€å§‹æ—¶é—´: {startTime.toFixed(3)}ms</p>
      )}
      {duration && (
        <p>æŒç»­æ—¶é—´: {duration.toFixed(3)}ms</p>
      )}
      <button onClick={startMeasure}>å¼€å§‹æµ‹é‡</button>
      <button onClick={stopMeasure} disabled={!startTime}>
        åœæ­¢æµ‹é‡
      </button>
    </div>
  )
}
```

## API

### useNow

```typescript
function useNow(options?: UseNowOptions): Date
```

**å‚æ•°ï¼š**

- `options`: é…ç½®é€‰é¡¹

**è¿”å›å€¼ï¼š**

- å½“å‰æ—¶é—´çš„ `Date` å¯¹è±¡

### useTimestamp

```typescript
function useTimestamp(options?: UseNowOptions): number
```

**å‚æ•°ï¼š**

- `options`: é…ç½®é€‰é¡¹

**è¿”å›å€¼ï¼š**

- å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰

### usePerformanceNow

```typescript
function usePerformanceNow(options?: UseNowOptions): number
```

**å‚æ•°ï¼š**

- `options`: é…ç½®é€‰é¡¹

**è¿”å›å€¼ï¼š**

- é«˜ç²¾åº¦æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼Œæ”¯æŒå°æ•°ï¼‰

### UseNowOptions

```typescript
interface UseNowOptions {
  interval?: number | false // æ›´æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œfalse è¡¨ç¤ºä¸è‡ªåŠ¨æ›´æ–°ï¼Œé»˜è®¤ 1000
}
```

## ä½¿ç”¨åœºæ™¯

- **æ•°å­—æ—¶é’Ÿ**ï¼šæ˜¾ç¤ºå®æ—¶æ—¶é—´
- **å€’è®¡æ—¶å™¨**ï¼šè®¡ç®—åˆ°ç‰¹å®šæ—¶é—´çš„å‰©ä½™æ—¶é—´
- **æ€§èƒ½ç›‘æ§**ï¼šæµ‹é‡ä»£ç æ‰§è¡Œæ—¶é—´
- **å®æ—¶æ•°æ®**ï¼šæ˜¾ç¤ºæ•°æ®çš„æ›´æ–°æ—¶é—´
- **åŠ¨ç”»æ—¶é—´è½´**ï¼šåŸºäºæ—¶é—´çš„åŠ¨ç”»æ•ˆæœ
- **ä¼šè¯è¶…æ—¶**ï¼šè·Ÿè¸ªç”¨æˆ·ä¼šè¯æ—¶é—´

## æ€§èƒ½è€ƒè™‘

1. **æ›´æ–°é¢‘ç‡**ï¼šæ ¹æ®éœ€è¦è°ƒæ•´æ›´æ–°é—´éš”ï¼Œé¿å…ä¸å¿…è¦çš„é«˜é¢‘æ›´æ–°
2. **æ¡ä»¶æ›´æ–°**ï¼šåœ¨ä¸éœ€è¦æ—¶åœæ­¢æ›´æ–°ï¼ˆè®¾ç½® `interval: false`ï¼‰
3. **ç²¾åº¦é€‰æ‹©**ï¼š
   - `useNow`: é€‚ç”¨äºä¸€èˆ¬æ—¶é—´æ˜¾ç¤º
   - `useTimestamp`: é€‚ç”¨äºéœ€è¦æ•°å€¼è®¡ç®—çš„åœºæ™¯
   - `usePerformanceNow`: é€‚ç”¨äºé«˜ç²¾åº¦æ€§èƒ½æµ‹é‡

## æ³¨æ„äº‹é¡¹

1. ç»„ä»¶å¸è½½æ—¶ä¼šè‡ªåŠ¨æ¸…ç†å®šæ—¶å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼
2. æ”¯æŒ SSRï¼Œåœ¨æœåŠ¡ç«¯è¿”å›æœåŠ¡å™¨æ—¶é—´
3. `usePerformanceNow` åœ¨ä¸æ”¯æŒ `performance.now()` çš„ç¯å¢ƒä¸­ä¼šå›é€€åˆ° `Date.now()`
4. é»˜è®¤æ¯ç§’æ›´æ–°ä¸€æ¬¡ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´é¢‘ç‡
5. è®¾ç½® `interval: false` å¯ä»¥åœæ­¢è‡ªåŠ¨æ›´æ–°

## ç›¸å…³ Hooks

- [`useInterval`](/functions/useInterval) - å®šæ—¶å™¨
- [`useTimeout`](/functions/useTimeout) - ä¸€æ¬¡æ€§å®šæ—¶å™¨
- [`useDebounce`](/functions/useDebounce) - é˜²æŠ–å‡½æ•°
- [`useThrottle`](/functions/useThrottle) - èŠ‚æµå‡½æ•°